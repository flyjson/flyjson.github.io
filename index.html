<!DOCTYPE html>
<!-- saved from url=(0020)https://flyjson.github.io/ -->
<html lang="zh-CN" class="os-windows screen-desktop-wide device-desktop">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSON在线解析及格式化验证</title>

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="720">
    <meta http-equiv="Cache-Control" content="max-age=3600">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="baidu-site-verification" content="mlJsiTNxiD">
    <meta name="google-site-verification" content="CPogK9tQWL5XIDF9F9x_tJyy1HtpDI8Rv6owOEIkUvM">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all">
    <meta name="author" content="https://flyjson.github.io/">
    <meta content="json,json在线解析,json格式化,json格式验证,json转xml,xml转json,json压缩"
          name="keywords">
    <meta content="致力于Json解析、验证、格式化、压缩、编辑器以及Json与XML相互转换等服务" name="description">
    <link href="./resources/zui.min.css" rel="stylesheet">
    <link href="./resources/css/font-awesome.css" rel="stylesheet">
    <link href="./resources/base.css" rel="stylesheet">
    <link href="./resources/new-style.css" rel="stylesheet">
    <link href="./resources/new-style2.css" rel="stylesheet">
    <link href="./resources/header.css" rel="stylesheet">
    <link rel="icon" href="./resources/image/icon.png" type="image/x-icon"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Favicons -->
    <style>
        .tip-mask {
            position: fixed;
            background-color: rgba(255, 255, 255, .5);
            z-index: 9999;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: none;
        }

        .old-version-tip {
            z-index: 99999;
            position: relative;
        }

        .old-version-tip:after {
            position: absolute;
            width: 113px;
            height: 100px;
            content: '';
            right: -10px;
            top: -10px;
            background-image: url("/static/202010/img/click-this.png");
            background-size: contain;
            background-repeat: no-repeat;
        }

        .old-version span {
            position: relative;
            z-index: 1;
        }

        .xf-window {
            display: none;
        }


        .form-control.focus, .form-control:focus {
            border-color: #145ccd;
            outline: 0;
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, .6);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, .6);
        }

        @media (min-width: 1200px) {
            .container {
                max-width: 1200px;
                padding: 0;
            }
        }

        @media (max-width: 1200px) {
            #right-box {
                padding-top: 90px !important;
            }
        }

        .editor-full-screen {
            width: 100% !important;
            height: 100% !important;
            position: fixed !important;
            top: 0;
            left: 0;
            z-index: 999;
            background: #fff;
        }

        .overflow-hidden {
            overflow: hidden;
        }

        #right-box {
            border-top: 0 !important;
        }
    </style>
    <style>
        .modal-overflow-unset {
            overflow: unset !important;
        }
    </style>
    <style type="text/css">.json_key {
        color: #92278f;
        font-weight: bold;
    }

    .json_null {
        color: #f1592a;
        font-weight: bold;
    }

    .json_string {
        color: #3ab54a;
        font-weight: bold;
    }

    .json_number {
        color: #25aae2;
        font-weight: bold;
    }

    .json_boolean {
        color: #f98280;
        font-weight: bold;
    }

    .json_link {
        color: #61D2D6;
        font-weight: bold;
    }

    .json_array_brackets {
    }</style>
    <script type="text/javascript" src="./resources/layer.js"></script>
    <link rel="stylesheet" type="text/css" href="./resources/layer.css">
    <script type="text/javascript" src="./resources/lang.js"></script>
    <link rel="stylesheet" href="./resources/layer(1).css" id="layuicss-layer">
    <link rel="stylesheet" href="resources/base.css">
</head>
<body class="bg-color-f7 modal-overflow-unset">
<style>
    .myNotice {
        display: inline-block;
    }

    .hasNotice {
        position: relative;
    }

    .myNotice.hasNotice:after {
        content: '';
        width: 8px;
        height: 8px;
        border-radius: 8px;
        background-color: red;
        position: absolute;
        right: 0;
        top: 0;
    }

    a.hasNotice:after {
        left: 10px;
        top: 50% !important;
        margin-top: -4px;
    }
</style>

<header class="header">
    <div class="row-fluid" style="padding: 0 20px">
        <!-- 导航模块-->
        <div class="header-nav-list first-nav comt-top-nva" style="position:relative;">
            <a class="logo" style="font-size: 34px;padding: 0">
                FlyJson</a>
        </div>

        <br style="clear:both;">
    </div>
</header>


<!--用于插入多个消息框的节点-->
<div id="messageAlert"></div>

<main class="row-fluid editor-con"
      style="font-family: menlo, monospace, Tahoma, 微软雅黑, 幼圆 !important; position: relative;">
    <div class="col-md-5 col-xs-5" style="padding: 0px; height: 100%; position: relative; z-index: 10;">
        <div class="numberedtextarea-wrapper "><textarea id="json-src" placeholder="在此输入json字符串或XML字符串..."
                                                         class="form-control common-font-size" style="height:100%;padding:10px 10px 10px 30px;border:0;border-radius:0;resize: none;
                  outline:none;border: 1px solid #eee"></textarea>
            <div class="numberedtextarea-line-numbers"
                 style="padding-top: 10px; line-height: 18.7556px; font-family: menlo, monospace, Tahoma, 微软雅黑, 幼圆; width: 30px;">
                <div class="numberedtextarea-number numberedtextarea-number-1" style="margin-bottom: 10px;">1</div>
            </div>
        </div>
    </div>
    <div id="dragEle" style="position: absolute; cursor: move;"></div>
    <div class="col-md-7 col-xs-7" style="padding: 0px; position: relative; height: 100%;">
        <div class="tool" style="position:absolute;border-top: 1px solid #eee;border-right: 1px solid #eee">
            <a href="#" class="tip zip" title="" data-placement="bottom" data-original-title="压缩" style="color:#999;"><em
                    class="fa fa-database"></em></a>
            <a href="#" class="tip xml" title="" data-placement="bottom" data-original-title="转XML" style="color:#999;"><em
                    class="fa fa-file-excel-o"></em></a>
            <a href="#" class="tip shown" title="" data-placement="bottom" data-original-title="显示行号"><em
                    class="fa fa-sort-amount-asc"></em></a>
            <a href="#" class="tip clear" title="" data-placement="bottom" data-original-title="清空"><em
                    class="fa fa-trash"></em></a>
            <a href="#" class="tip save" title="" data-placement="bottom" data-original-title="保存"><em
                    class="fa fa-download"></em></a>
            <a href="#" class="tip copy" title="" data-clipboard-target="#json-target" data-placement="bottom"
               data-original-title="复制"><i class="fa fa-copy"></i></a>
            <a href="#" class="tip share" title="" data-placement="bottom" data-original-title="复制分享">
                <i class="fa fa-share"></i></a>

            <a href="#" class="tip compress" title="" data-placement="bottom" data-original-title="折叠"><em
                    class="fa fa-compress"></em></a>
            <a href="#" class="tip fullScreen" title="" data-placement="bottom" data-original-title="全屏"><em
                    class="fa fa-arrows-alt"></em></a>
            <label style="cursor: pointer">
                <input type="checkbox" checked="checked" name="cancelZY" id="cancelZY"
                       style="margin-top: 0;position: relative;top: 2px">
                保留转义
            </label>
            <ul style="margin: 0 0 0 0;display: inline-block;vertical-align: middle;list-style: none;">
                <li>


                </li>
            </ul>
        </div>
        <div style="position: absolute;top: 0;left: 0;background: #fff;height: 60px; width: 100%;z-index: 0;"></div>
        <div id="right-box" class="common-font-size bg-color-ff"
             style="width:100%;height:calc(100% - 60px);border:solid 1px #eee;border-radius:0;resize: none;overflow-y:scroll; outline:none;position:relative;top:60px;">
            <p class="editor-tip">可点击key和value值进行编辑</p>
            <div id="hidden-message-box" class="alert alert-danger alert-dismissible" role="alert"
                 style="display:none;margin-bottom:0;padding:10px 2vw;font-size: calc(var(--target) + 4px);">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span
                        aria-hidden="true">×</span>
                </button>
                <p><i class="fa fa-bell" aria-hidden="true"></i>
                    提示：
                    <span id="hidden-message">
                      默认警告
                  </span>

                </p>
            </div>
            <div id="line-num"
                 style="background-color:#fafafa;padding:0px 8px;float:left;border-right:dashed 1px #E5EBEE;display:none;color:#999;position:absolute;text-align:center;over-flow:hidden;">
                <div>1
                    <div>
                        <div>2
                            <div>
                                <div>3
                                    <div>
                                        <div>4
                                            <div></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="ro" id="json-target" style="padding:0px 32px;white-space: pre-line;word-wrap:break-word;"><span
                    data-type="object"><i style="cursor:pointer;" class="fa fa-minus-square-o" onclick="hide(this)"></i>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span
                    class="json_key" contenteditable="true">"aa"</span>:<span class="json_string"
                                                                              contenteditable="true">"aa"</span><br>}</span>
            </div>
        </div>
    </div>
    <br style="clear:both;">


</main>
<footer class="relative b-large-margin">
    <div class="container">
        <div class="footer-gg-b">
            <div class="footer-gg-b-addr">
                <div class="footer-gg-b-addr-img">
                    <!-- json底部 -->
                    <ins class="adsbygoogle" style="display:inline-block;width:970px;height:10px"
                         data-ad-client="ca-pub-0888257628527075" data-ad-slot="6525978731"></ins>
                    <script>
                        (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>
            </div>
            <div class="footer-nav-list width-out">
<!--                <div class="title">友情链接：</div>-->
<!--                <dd>-->
<!--                    <a href="https://www.ip138.com/" target="_blank">ip查询</a>-->
<!--                </dd>-->
            </div>
        </div>
    </div>
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?ceff755fa682e233a77434fd21afac23";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
</footer>


<script src="./resources/lang.js"></script>
<script>

    var timerLogin;

    var regTc, logTc, findTc;

    var notify_url;

    regTc = function () {
        layer.open({
            type: 1,
            closeBtn: false,
            title: false,
            shade: true,
            shadeClose: true,
            scrollbar: true,
            area: ['750px', '480px'],
            // area: '750px',
            content: ''
        })
    }
    logTc = function () {
        layer.open({
            type: 1,
            closeBtn: false,
            title: false,
            shade: true,
            shadeClose: true,
            scrollbar: true,
            // area: ['750px', '480px'],
            end: function () {
                if (timerLogin) {
                    clearInterval(timerLogin)
                }
            },
            area: '750px',
            content: ''
        })
    }
    findTc = function () {
        layer.open({
            type: 1,
            closeBtn: false,
            title: false,
            shade: true,
            shadeClose: true,
            scrollbar: true,
            // area:['750px','auto'],
            area: ['750px', '480px'],
            content: ''        })
    }

    window.onload = function () {

        let url = decodeURI(window.location.href)
        let tag = '?data='
        let dataInit = false
        if(url.indexOf(tag)>0){
            let params = url.substring(url.indexOf(tag)+tag.length)
            if(params.lastIndexOf('#')===params.length-1){
                params = params.substring(0,params.length-1)
            }
            $('#json-src').val(params)
            dataInit = true
        }
        /*reg*/
        $('body').on('click', '#lgrt', function () {
            regTc()
        })

        /*login*/
        $('body').on('click', '#lggt', function () {
            logTc();
            $('#reloadQrcode').click();
            timerLogin = setInterval('dr_wx_notify()', 1000);
        })

        /*find password*/
        $('body').on('click', '.find-password-btn', function () {
            layer.closeAll();
            findTc()
        })

        $('body').on('click', '.reg-account', function () {
            layer.closeAll();
            regTc()
        })

        $('body').on('click', '.login-title', function () {
            if (timerLogin) {
                clearInterval(timerLogin);
            }
            $('.login-title').removeClass('active');
            $(this).addClass('active');
            $('.col-md-4').hide();
            $('.col-md-4').eq($(this).index()).show()

            if ($('#loginStepTwo').is(':visible')) {
                timerLogin = setInterval('dr_wx_notify()', 1000);
            } else {
                clearInterval(timerLogin);
            }
        })


        $('body').on('click', '#returnToLogin', function () {
            layer.closeAll();
            logTc()
            $('#loginStepTwo').addClass('display-none')
            $('#loginStepOne ').removeClass('display-none')
            $('.login-title').removeClass('active')
            $('.login-title').eq(1).addClass('active')

        })

        $('body').on('click', '#regToLog', function () {
            layer.closeAll();
            logTc()
            $('#loginStepTwo').addClass('display-none')
            $('#loginStepOne ').removeClass('display-none')
            $('.login-title').removeClass('active')
            $('.login-title').eq(1).addClass('active')
        })

        if(dataInit){
            $('#json-src').keyup()
            // window.location.href = url.substring(0,url.indexOf(tag))
        }
    }

    function regLogFindSubmit(iv) {
        if (event.keyCode == 13) {
            if ($(".veri-code") && true == $(".veri-code").is(":focus")) {
                document.mylogform.logbtn.click();
                return;
            }

            if ($('input[name="data[code]"]') && true == $('input[name="data[code]"]').is(":focus")) {
                $('#findSubveri').click();
                return;
            }

            if ($(".sms-veri") && $(".sms-veri").is(":focus") == true) {
                $('#regInBtn').click();
                return;
            }
        }
    }

    function dr_ajax_member_reg(url, form) {
        // var url = window.location.href || url;
        var reg = /^(?![^a-zA-Z]+$)(?!\\D+$)[a-zA-Z0-9]{8,}$/;
        if (!$('#myform #dr_phone').val()) {
            layer.msg('手机号不能为空');
            return;
        }
        if (!$('#myform #dr_password').val()) {
            layer.msg('密码不能为空');
            return;
        }
        if ($('#myform #dr_password').val().search(reg) === -1) {
            layer.msg('密码数字+字母不少于8位');
            return;
        }
        if (!$('#myform #dr_password2').val()) {
            layer.msg('确认密码不能为空');
            return;
        }
        if ($('#myform #dr_password2').val() !== $('#myform #dr_password').val()) {
            layer.msg('密码和确认密码不一致');
            return;
        }
        if (!$('#dr_code').val()) {
            layer.msg('验证码不能为空');
            return;
        }
        if (!$('#dr_sms').val()) {
            layer.msg('短信验证码不能为空');
            return;
        }
        var flen = $('[id=' + form + ']').length;
        // 验证id是否存在
        if (flen == 0) {
            dr_cmf_tips(0, lang['unformid'] + ' (' + form + ')');
            return;
        }
        // 验证重复
        if (flen > 1) {
            dr_cmf_tips(0, lang['repeatformid'] + ' (' + form + ')');
            return;
        }

        var loading = layer.load(1, {
            shade: [0.9, '#000000'], //0.1透明度的白色背景
            time: 100000000
        });

        $("#" + form + ' .form-group').removeClass('has-error');

        var regData = {
            'data[phone]': $('#dr_phone').val(),
            'data[password]': $('#dr_password').val(),
            'data[password2]': $('#dr_password2').val(),
            'code': $('#dr_code').val(),
            'sms': $('#dr_sms').val(),
            'is_protocol': $('#dr_protocol').val(),
            'csrf_test_name': "e7866e97ab61912cc76791ee0d7bc7e4",
        };
        $.ajax({
            type: "POST",
            dataType: "json",
            url: url,
            data: regData,
            success: function (json) {
                layer.close(loading);
                if (json.code == 1) {
                    layer.closeAll();
                    layer.msg('注册成功');
                    loginCookie(json.data.member.avatar, json.data.member.name ? json.data.member.name : json.data.member.phone);
                } else {
                    dr_cmf_tips(0, json.msg, json.data.time);
                    $('.fc-code img').click();
                    if (json.data.field) {
                        $('#dr_row_' + json.data.field).addClass('has-error');
                        $('#dr_' + json.data.field).focus();
                    }
                }
            },
            error: function (HttpRequest, ajaxOptions, thrownError) {
                dr_ajax_alert_error(HttpRequest, ajaxOptions, thrownError);
            }
        });
    }

    // 注册阅读网站协议
    function dr_show_protocol() {
        layer.open({
            type: 2,
            title: lang['protocol'],
            shadeClose: true,
            area: ['70%', '70%'],
            content: '/index.php?s=member&c=api&m=protocol'
        });
    }


    function dr_wx_notify() {
        if (notify_url) {
            $.ajax({
                type: "post",
                url: notify_url,
                dataType: "json",
                success: function (json) {
                    if (json.code == 1) {
                        console.log(4)
                        loginCookie(json.data.avatar, json.data.username ? json.data.username : json.data.nickname);
                        var oss_url = json.data.sso;
                        // 发送同步登录信息
                        for (var i in oss_url) {
                            $.ajax({
                                type: "GET",
                                url: oss_url[i],
                                dataType: "jsonp",
                                success: function (json) {
                                },
                                error: function () {
                                }
                            });
                        }
                        if (json.data.url) {
                            //setTimeout("window.location.href = '" + json.data.url + "'", 1000);

                            layer.closeAll();
                            layer.msg('登录成功');
                            loginCookie(json.data.avatar, json.data.nickname ? json.data.nickname : json.data.phone);
                            // window.location.reload();
                        } else {
                            //setTimeout("window.location.href ='/index.php?s=member'", 1000);


                            layer.closeAll();
                            layer.msg('登录成功');
                            loginCookie(json.data.avatar, json.data.nickname ? json.data.nickname : json.data.phone);
                        }
                    }
                },
                error: function () {
                }
            });
        }

    }

    function dr_ajax_member_login(url, form) {

        if (!$('.login-tel').val()) {
            layer.msg('手机号/密码不能为空');
            return;
        }
        if (!$('.login-pw').val()) {
            layer.msg('密码不能为空');
            return;
        }
        if (!$('.veri-code').val()) {
            layer.msg('验证码不能为空');
            return;
        }

        var flen = $('[id=' + form + ']').length;
        // 验证id是否存在
        if (flen == 0) {
            dr_cmf_tips(0, lang['unformid'] + ' (' + form + ')');
            return;
        }
        // 验证重复
        if (flen > 1) {
            dr_cmf_tips(0, lang['repeatformid'] + ' (' + form + ')');
            return;
        }

        var loading = layer.load(1, {
            shade: [0.9, '#000000'], //0.1透明度的白色背景
            time: 100000000
        });


        $("#" + form + ' .form-group').removeClass('has-error');

        var logData = {
            'data[username]': $('#logUsername').val(),
            'data[password]': $('#logPassword').val(),
            'code': $('#logCode').val(),
            'csrf_test_name': "e7866e97ab61912cc76791ee0d7bc7e4",
        };


    }

    function dr_ajax_url_find(url) {
        var index = layer.load(2, {
            shade: [0.5, '#fff'], //0.1透明度的白色背景
            time: 100000000
        });

        var pass = checkPwRule('#dr_password_find');

        if (!pass) {
            layer.msg('数字+字母不少于8位');
            layer.close(index);
            return;
        }
        var pass2 = $('#dr_password_find').val() == $('#dr_password_find2').val();
        if (!pass2) {
            layer.msg('再次输入密码不一致')
            layer.close(index);
            return;
        }


        if (pass && pass2) {
            $.ajax({
                type: "GET",
                url: url,
                dataType: "json",
                success: function (json) {
                    layer.close(index);
                    if (json.code == 0) {
                        $('.fc-code img').click();
                        if (json.data.field) {
                            $('#dr_row_' + json.data.field).addClass('has-error');
                            $('#dr_' + json.data.field).focus();
                        }
                    } else {
                        sendActiveCode('#activeCode');
                        $('input[name="data[code]"]').focus();
                    }
                    dr_cmf_tips(json.code, json.msg);
                    if (json.data.url) {
                        setTimeout("window.location.href = '" + json.data.url + "'", 2000);
                    }
                },
                error: function (HttpRequest, ajaxOptions, thrownError) {
                    dr_ajax_alert_error(HttpRequest, ajaxOptions, thrownError)
                }
            });
        }

    }

    function dr_ajax_submit_find(url, form, time, go) {
        var reg = /^(?![^a-zA-Z]+$)(?!\\D+$)[a-zA-Z0-9]{8,}$/;
        if (!$('#dr_value').val()) {
            layer.msg('手机号不能为空');
            return;
        }
        if (!$('#dr_password_find').val()) {
            layer.msg('密码不能为空');
            return;
        }
        if ($('#dr_password_find').val().search(reg) === -1) {
            layer.msg('密码为数字+字母且不少于8位');
            return;
        }
        if (!$('#dr_password_find2').val()) {
            layer.msg('确认密码不能为空');
            return;
        }
        if ($('#dr_password_find').val() !== $('#dr_password_find2').val()) {
            layer.msg('密码不一致');
            return;
        }

        if (!$('#dr_code_find').val()) {
            layer.msg('图文验证码不能为空');
            return;
        }
        if (!$('input[name="data[code]"]').val()) {
            layer.msg('手机验证码不能为空');
            return;
        }

        var flen = $('[id=' + form + ']').length;
        // 验证id是否存在
        if (flen == 0) {
            dr_cmf_tips(0, lang['unformid'] + ' (' + form + ')');
            return;
        }
        // 验证重复
        if (flen > 1) {
            dr_cmf_tips(0, lang['repeatformid'] + ' (' + form + ')');
            return;
        }

        // 验证必填项管理员
        var tips_obj = $('#' + form).find('[name=is_tips]');
        if (tips_obj.val() == 'required') {
            tips_obj.val('');
        }
        if ($('#' + form).find('[name=is_admin]').val() == 1) {
            $('#' + form).find('.dr_required').each(function () {
                if (!$(this).val()) {
                    tips_obj.val('required');
                }
            });
        }

        var tips = tips_obj.val();
        if (tips) {
            if (tips == 'required') {
                tips = '有必填字段未填写，确认提交吗？';
            }
            layer.confirm(
                tips,
                {
                    icon: 3,
                    shade: 0,
                    title: lang['ts'],
                    btn: [lang['ok'], lang['esc']]
                }, function (index) {
                    dr_post_submit_log(url, form, time, go);
                });
        } else {
            dr_post_submit_log(url, form, time, go);
        }
    }

    function dr_post_submit_log(url, form, time, go) {

        url = url.replace(/&page=\d+&page/g, '&page');

        var loading = layer.load(1, {
            shade: [0.9, '#000000'], //0.1透明度的白色背景
            time: 100000000
        });

        $("#" + form + ' .form-group').removeClass('has-error');

        $('.dr_ueditor').each(function () {
            var uev = $(this).attr('id');
            if (UE.getEditor(uev).queryCommandState('source') != 0) {
                UE.getEditor(uev).execCommand('source');
            }
        });

        var findData = {
            'data[value]': $('#dr_value').val(),
            'data[password]': $('#dr_password_find').val(),
            'data[password2]': $('#dr_password_find2').val(),
            'data[code]': $('#findCode').val(),
            'csrf_test_name': "e7866e97ab61912cc76791ee0d7bc7e4",
        };
        $.ajax({
            type: "POST",
            dataType: "json",
            url: url,
            data: findData,
            success: function (json) {
                layer.close(loading);
                if (json.code) {
                    dr_cmf_tips(1, json.msg, json.data.time);
                    if (json.data.htmlfile) {
                        // 执行生成htmljs
                        $.ajax({
                            type: "GET",
                            url: json.data.htmlfile,
                            dataType: "jsonp",
                            success: function (json) {
                            },
                            error: function () {
                            }
                        });
                    }
                    if (json.data.htmllist) {
                        // 执行生成htmljs
                        $.ajax({
                            type: "GET",
                            url: json.data.htmllist,
                            dataType: "jsonp",
                            success: function (json) {
                            },
                            error: function () {
                            }
                        });
                    }
                    if (time) {
                        // var gourl = url;
                        // if (go != '' && go != undefined && go != 'undefined') {
                        //     gourl = go;
                        // } else if (json.data.url) {
                        //     gourl = json.data.url;
                        // }
                        // setTimeout("window.location.href = '" + gourl + "'", time);

                        layer.closeAll();
                        logTc()
                        $('#loginStepTwo').addClass('display-none');
                        $('#loginStepOne ').removeClass('display-none');
                        $('.login-title').removeClass('active');
                        $('.login-title').eq(1).addClass('active');
                        layer.msg('密码修改成功，请重新登录');
                    }
                } else {
                    dr_cmf_tips(0, json.msg, json.data.time);
                    $('.fc-code img').click();
                    if (json.data.field) {
                        $('#dr_row_' + json.data.field).addClass('has-error');
                        $('#dr_' + json.data.field).focus();
                    }
                }
            },
            error: function (HttpRequest, ajaxOptions, thrownError) {
                dr_ajax_alert_error(HttpRequest, ajaxOptions, thrownError)
            }
        });
    }


    function refreshQrcode() {
        var loading = layer.load(1, {
            shade: [0.9, '#000000'], //0.1透明度的白色背景
            time: 100000000
        });
        $.ajax({
            type: "POST",
            url: '/user/get_show_qrcode',
            dataType: "json",
            success: function (json) {
                layer.close(loading);
                if (json.code == 1) {
                    if (json.msg == 'success') {
                        // if ($('.login-by-code-img-noshow').is(':visible')){
                        // }
                        $('.login-by-code-img-noshow').hide();
                        $('#wcQrCodeImg').attr('src', json.data.code);
                        notify_url = json.data.notify_url;
                        $('.refresh-qrcode').show();
                    }
                } else {
                    $('.login-by-code-img-noshow').show();
                    $('.refresh-qrcode').hide();
                }
            },
            error: function (HttpRequest, ajaxOptions, thrownError) {
                layer.close(loading);
                $('.refresh-qrcode').hide();
                dr_ajax_alert_error(HttpRequest, ajaxOptions, thrownError)
            }
        });
    }
</script>
<style>
    .popup-link-info-box {
        position: absolute;
        right: 58px;
        top: 0;
        background-color: #fff;
        -webkit-box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.1);
        box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.1);
        padding: 15px;
        display: none;
    }

    .popup-link-info-box li {
        float: left;
        margin-right: 10px;
        border: 1px solid #eee;
        text-align: center;
        line-height: 50px;
    }

    .popup-link-info-box li p {
        font-size: 14px;
        color: #333;
    }

    .popup-link-info-box li p span {
        font-size: 14px;
        color: #333;
    }

    .popup-link-info-box li .popup-wechat-wrapper {
    }

    .popup-link-info-box li .popup-wechat-wrapper img {
        height: 100%;
        width: 100%;
        object-fit: cover;
    }

</style>

<link href="./resources/jquery.numberedtextarea.css" rel="stylesheet">

<script src="./resources/jquery.min.js"></script>
<script src="./resources/zui.min.js"></script>
<script src="./resources/jquery.cookie.js"></script>
<script src="./resources/qrcode.min.js"></script>
<script src="./resources/jquery.message.js"></script>
<div style="clear:both;"></div>
<div id="jquery-beauty-msg"></div>
<script src="./resources/bignumber.min.js"></script>
<script src="./resources/jquery.json.js"></script>
<script src="./resources/jquery.xml2json.js"></script>
<script src="./resources/jquery.json2xml.js"></script>
<script src="./resources/json2.js"></script>
<script src="./resources/jsonlint.js"></script>
<script src="./resources/clipboard.min.js"></script>
<script src="./resources/FileSaver.min.js"></script>
<script src="./resources/jquery.numberedtextarea.js"></script>
<script src="./resources/drag.js"></script>
<script src="./resources/new-common.js"></script>


<script type="text/javascript">
    if (window.localStorage.getItem('show-version-tip') && window.localStorage.getItem('show-version-tip') === '1') {
    } else {
        // $('.old-version').addClass('old-version-tip');
        // $('.old-version').attr('data-href', $('.old-version').attr('href'));
        // $('.old-version').attr('href', '');
        // $('.tip-mask').show()
    }
    $('.tip-mask').click(function () {
        $(this).remove();
        $('.old-version-tip').removeClass('old-version-tip');
        $('.old-version').attr('href', $('.old-version').attr('data-href'));
    });
    $('.old-version-tip').click(function () {
        $(this).remove();
        $('.old-version').attr('href', $('.old-version').attr('data-href'));
        $('.tip-mask').removeClass('old-version-tip');
        window.localStorage.setItem('show-version-tip', '1')
    });

    $('textarea').numberedtextarea();
    var current_json = '';
    var current_content = '';
    var current_json_str = '';
    var xml_flag = false;
    var zip_flag = false;
    var shown_flag = false;
    var compress_flag = false;
    $('.tip').tooltip();

    function init() {
        xml_flag = false;
        zip_flag = false;
        shown_flag = false;
        compress_flag = false;
        isXml = false;
        renderLine();
        $('.xml').attr('style', 'color:#999;');
        $('.zip').attr('style', 'color:#999;');

    }

    $('#cancelZY').click(function () {
        init();
        var content = $.trim($('#json-src').val());
        var result = '';
        if (content != '') {
            //如果是xml,那么转换为json
            if (content.substr(0, 1) === '<' && content.substr(-1, 1) === '>') {
                try {
                    var json_obj = $.xml2json(content);
                    content = JSON.stringify(json_obj);
                } catch (e) {
                    result = '解析错误：<span style="color: #f1592a;font-weight:bold;">' + e.message + '</span>';
                    current_json_str = result;
                    $('#json-target').html(result);
                    return false;
                }

            }
            try {
                var hasZY = $('#cancelZY').prop('checked');
                if (hasZY) {
                    content = content.replace(/\\/g, '\\\\');
                    content = content.replace(/\\"/g, '\\\\"');
                }

                current_json = jsonlint.parse(content);
                current_json_str = JSON.stringify(current_json);
                //current_json = JSON.parse(content);
                current_content = content;
                result = new JSONFormat(content, 4).toString();
            } catch (e) {
                result = '<span style="color: #f1592a;font-weight:bold;">' + e + '</span>';
                current_json_str = result;
            }

            $('#json-target').html(result);
        } else {
            $('#json-target').html('');
        }
    });

    var isXml = false;
    $('#json-src').keyup(function () {
        init();
        var content = $.trim($(this).val());
        var result = '';
        if (content != '') {
            //如果是xml,那么转换为json
            if (content.substr(0, 1) === '<' && content.substr(-1, 1) === '>') {
                isXml = true;
                try {
                    var json_obj = $.xml2json(content);
                    content = JSON.stringify(json_obj);
                } catch (e) {
                    result = '解析错误：<span style="color: #f1592a;font-weight:bold;">' + e.message + '</span>';
                    current_json_str = result;
                    $('#json-target').html(result);
                    return false;
                }

            }

            try {
                var hasZY = $('#cancelZY').prop('checked');
                if (hasZY) {
                    content = content.replace(/\\/g, '\\\\');
                    content = content.replace(/\\"/g, '\\\\"');
                }

                current_json = jsonlint.parse(content);
                current_json_str = JSON.stringify(current_json);

                //current_json = JSON.parse(content);
                current_content = content;
                result = new JSONFormat(content, 4).toString();
            } catch (e) {
                result = '<span style="color: #f1592a;font-weight:bold;">' + e + '</span>';
                current_json_str = result;
            }

            $('#json-target').html(result);
        } else {
            $('#json-target').html('');
        }

    });

    //主入口
    function getRealJsonData(baseStr) {
        if (!baseStr || typeof baseStr != 'string') return;
        var jsonData = null;
        try {
            jsonData = JSON.parse(baseStr);
        } catch (err) {
            return null;
        }
        var needReplaceStrs = [];
        loopFindArrOrObj(jsonData, needReplaceStrs);
        needReplaceStrs.forEach(function (replaceInfo) {
            var matchArr = baseStr.match(eval('/"' + replaceInfo.key + '":[0-9]{15,}/'));
            if (matchArr) {
                var str = matchArr[0];
                var replaceStr = str.replace('"' + replaceInfo.key + '":', '"' + replaceInfo.key + '":"');
                replaceStr += '"';
                baseStr = baseStr.replace(str, replaceStr);
            }
        });
        var returnJson = null;
        returnJson = JSON.parse(baseStr);
        return returnJson;
    }

    //遍历对象类型的
    function getNeedRpStrByObj(obj, needReplaceStrs) {
        for (var key in obj) {
            var value = obj[key];
            if (typeof value == 'number' && value > 9007199254740992) {
                needReplaceStrs.push({key: key});
            }
            loopFindArrOrObj(value, needReplaceStrs);
        }
    }

    //遍历数组类型的
    function getNeedRpStrByArr(arr, needReplaceStrs) {
        for (var i = 0; i < arr.length; i++) {
            var value = arr[i];
            loopFindArrOrObj(value, needReplaceStrs);
        }
    }

    //递归遍历
    function loopFindArrOrObj(value, needRpStrArr) {
        var valueTypeof = Object.prototype.toString.call(value);
        if (valueTypeof == '[object Object]') {
            needRpStrArr.concat(getNeedRpStrByObj(value, needRpStrArr));
        }
        if (valueTypeof == '[object Array]') {
            needRpStrArr.concat(getNeedRpStrByArr(value, needRpStrArr));
        }
    }


    $('#right-box').keyup(function () {

        var text = $('#json-target').html().replace(/<br\/>/g, "\n").replace(/<br>/g, "\n").replace(/<[^>]+>/g, "").replace(/&nbsp;/ig, " ").replace(/Object{...}/ig, "").replace(/Array\[[0-9]+\]/ig, "");
        if (!xml_flag) {
            $('#json-src').val(text);
            current_content = text;
        }

    });
    $('.xml').click(function () {
        if (xml_flag) {
            $('#json-src').keyup();
        } else {
            var result = $.json2xml(current_content);
            $('#json-target').html('<textarea style="width:100%;position:absolute;height: 80vh;min-height:480px;border:0;resize:none;">' + result + '</textarea>');
            xml_flag = true;
            $(this).attr('style', 'color:#15b374;');
        }

    });
    $('.shown').click(function () {
        if (!shown_flag) {
            renderLine();
            $('#line-num').show();
            console.log($('#line-num'))
            $('.numberedtextarea-line-numbers').show();
            shown_flag = true;
            $(this).attr('style', 'color:#15b374;');
        } else {
            $('#line-num').hide();
            $('.numberedtextarea-line-numbers').hide();
            shown_flag = false;
            $(this).attr('style', 'color:#999;');
        }
    });

    function renderLine() {
        var line_num = $('#json-target').height() / 20;
        $('#line-num').html("");
        var line_num_html = "";
        for (var i = 1; i < line_num + 1; i++) {
            line_num_html += "<div>" + i + "<div>";
        }
        $('#line-num').html(line_num_html);
    }

    $('.zip').click(function () {
        if (zip_flag) {
            $('#json-src').keyup();
        } else {
            //$('#json-target').html(current_json_str.replace(/</g,"&lt;").replace(/>/g,"&gt;"));
            $('#json-target').html("<xmp>" + current_json_str + "</xmp>");
            zip_flag = true;
            $(this).attr('style', 'color:#15b374;');
        }

    });
    $('.compress').click(function () {
        if (!compress_flag) {
            $(this).attr('style', 'color:#15b374;');
            //$(this).attr('title','取消折叠').tooltip('fixTitle').tooltip('show');
            $($(".fa-minus-square-o").toArray().reverse()).click();
            compress_flag = true;
        } else {
            while ($(".fa-plus-square-o").length > 0) {
                $(".fa-plus-square-o").click();
            }
            compress_flag = false;
            $(this).attr('style', 'color:#555;');
            $(this).attr('title', '折叠').tooltip('fixTitle').tooltip('show');
        }
    });
    $('.clear').click(function () {
        $('#json-src').val('');
        $('#json-target').html('');
    });
    function copyToClipboard(s){
        if(window.clipboardData){
            window.clipboardData.setData('text',s);
        }else{
            (function(s){
                document.oncopy=function(e){
                    e.clipboardData.setData('text',s);
                    e.preventDefault();
                    document.oncopy=null;
                }
            })(s);
            document.execCommand('Copy');
        }
    }
    $('.share').click(function () {
        $('.zip').keyup()
        let data = window.location.origin+window.location.pathname
        if(current_json_str && current_json_str.trim()!==''){
            data = window.location.origin+window.location.pathname+'?data='+current_json_str
        }
        copyToClipboard(data)
    });

    //读取share
    console.log(getPar('share'));
    if (getPar('share')) {
        // 如果index.php没有配置不缓存，使用get请求会被缓存，百度云暂时不缓存post请求
        $.post("/index.php?is_ajax=1&s=api&app=blog&c=tran&m=read_share&sign=" + getPar('share'), function (data) {
            if (data.code == 1) {
                $("#json-src").val(data.data.content);
                $('#cancelZY').click();
            }

        }, 'jsonp')
    }

    function getPar(par) {
        //获取当前URL
        var local_url = document.location.hash.replace('#', '');
        //获取要取得的get参数位置
        var get = local_url.indexOf(par + "=");
        if (get == -1) {
            return false;
        }
        //截取字符串
        var get_par = local_url.slice(par.length + get + 1);
        //判断截取后的字符串是否还有其他get参数
        var nextPar = get_par.indexOf("&");
        if (nextPar != -1) {
            get_par = get_par.slice(0, nextPar);
        }
        return get_par;
    }


    $('.fullScreen').click(function () {
        $('#dragEle').css('left', '');
        $('main .col-md-7').css('width', '');
        $('main .col-md-5').css('width', '');
        $('.editor-con').toggleClass('editor-full-screen');
        $('body').toggleClass('overflow-hidden');
        $('.fullScreen .fa').toggleClass('fa-minus fa-arrows-alt');
        if ($(this).attr('data-original-title') === '全屏') {
            $(this).attr('data-original-title', '最小化')
        } else {
            $(this).attr('data-original-title', '全屏')
        }
    });
    (function ($) {
        $.fn.innerText = function (msg) {
            if (msg) {
                if (document.body.innerText) {
                    for (var i in this) {
                        this[i].innerText = msg;
                    }
                } else {
                    for (var i in this) {
                        this[i].innerHTML.replace(/&amp;lt;br&amp;gt;/gi, "n").replace(/(&amp;lt;([^&amp;gt;]+)&amp;gt;)/gi, "");
                    }
                }
                return this;
            } else {
                if (document.body.innerText) {
                    return this[0].innerText;
                } else {
                    return this[0].innerHTML.replace(/&amp;lt;br&amp;gt;/gi, "n").replace(/(&amp;lt;([^&amp;gt;]+)&amp;gt;)/gi, "");
                }
            }
        };
    })(jQuery);
    $('.save').click(function () {
        // var content = JSON.stringify(current_json);
        // $('#txt-content').val(content);
        //var text = "hell world";
        var html = $('#json-target').html().replace(/\n/g, '<br/>').replace(/\n/g, '<br>');
        var text = $('#json-target').innerText().replace('　　', '    ');
        var blob = new Blob([text], {type: "application/json;charset=utf-8"});
        var timestamp = new Date().getTime();
        saveAs(blob, "format." + timestamp + ".json");
    });
    var clipboard = new Clipboard('.copy');

    $('#json-src').keyup();

    //拖拽
    // var totalWidth = $(window).outerWidth() >= 1200 ? 1200 : $(window).outerWidth();
    var totalWidth = $(window).outerWidth();
    // var gapWidth = $(window).outerWidth() > 1200 ? ($(window).outerWidth() - 1200) / 2 : 0;
    var gapWidth = 0;
    var forbidenWidth = totalWidth - 400;
    $('#dragEle').myDrag({
        parent: 'parent', //定义拖动不能超出的外框,拖动范围
        randomPosition: false, //初始化随机位置
        direction: 'x', //方向
        handler: false, //把手
        dragStart: function (x, y) {
            totalWidth = $(window).outerWidth();
            gapWidth = 0;
            forbidenWidth = totalWidth - 400;
        }, //拖动开始 x,y为当前坐标
        dragEnd: function (x, y) {
            totalWidth = $(window).outerWidth();
            gapWidth = 0;
            forbidenWidth = totalWidth - 400;

            if (x > forbidenWidth) {
                $('#dragEle').offset({top: 0, left: forbidenWidth - 5 + gapWidth});
                $('main .col-md-5').width(forbidenWidth);
                $('main .col-md-7').width(totalWidth - forbidenWidth);
            } else if (x < 200) {
                $('#dragEle').offset({top: 0, left: 195 + gapWidth});
                $('main .col-md-5').width(200);
                $('main .col-md-7').width(totalWidth - 200);
            } else {
                $('main .col-md-5').width(x);
                $('main .col-md-7').width(totalWidth - x - 1);
            }
        }, //拖动停止 x,y为当前坐标
        dragMove: function (x, y) {
            if (x > forbidenWidth || x < 200) {

            } else {
                $('main .col-md-5').width(x);
                $('main .col-md-7').width(totalWidth - x - 1);
            }
        } //拖动进行中 x,y为当前坐标
    });
    $(window).resize(function () {
        $('#dragEle').css('left', '');
        $('main .col-md-7').css('width', '');
        $('main .col-md-5').css('width', '');
    });

    //搜索
    $('select.chosen-select').on('change', function () {

        window.location.href = $(this).val()
    });
    $('body').on('click', '#goTop', function () {
        $('body,html').animate({
                scrollTop: 0
            },
            500);
        return false;
    });

    /*收藏*/
    $('body').on('click', '.xf-collection', function () {
        alert('您的浏览器不支持,请按 Ctrl+D 手动收藏!')
    });

    $('body').on('mouseenter', '.ind-footer-nav-item', function () {
        $('.ind-footer-nav-item').removeClass('active')
        $(this).addClass('active');
        var index = $(this).attr('data-index');
        $('.ind-footer-nav-show').each(function (i, v) {
            if ($(this).attr('data-index') == index) {
                $(this).addClass('active')
            } else {
                $(this).removeClass('active');
            }
        });
    });


    $('body').on('mouseenter', '.nav-show-one', function () {
        $('.nav-show-one').removeClass('active');
        $(this).addClass('active');
        var itext = $(this).text();
        var ione = $(this).attr('data-chose');
        $(this).closest('.ind-footer-nav-show').find('.nav-show-one-sm-s-show').each(function (i, v) {
            $(v).hide();
            var index = $(v).attr('data-target');
            if (ione == index) {
                $(v).find('.nav-show-one-sm-show-t').text(itext)
                $(v).show();
            }
        });
    });
</script>
</body>
</html>
